---
import BaseLayout from './BaseLayout.astro';

const { title, description, date, kind, backlinks = [] } = Astro.props;
const formattedDate = date
  ? new Intl.DateTimeFormat('en-US', { dateStyle: 'medium' }).format(date)
  : null;
const meta = [formattedDate, kind].filter(Boolean).join(' | ');
---

<BaseLayout title={title}>
  <article class="article">
    <header class="article-header">
      <h1>{title}</h1>
      {description ? <p class="lede">{description}</p> : null}
      {meta ? <p class="meta">{meta}</p> : null}
    </header>
    <div class="prose">
      <slot />
    </div>

    {backlinks.length ? (
      <section class="section">
        <h2>Backlinks</h2>
        <ul class="list">
          {backlinks.map((link) => (
            <li>
              <a href={link.url}>{link.title}</a>
            </li>
          ))}
        </ul>
      </section>
    ) : null}
  </article>
</BaseLayout>
